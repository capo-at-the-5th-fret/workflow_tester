
name: Build/Test cross-platform CMake project

on: [ workflow_dispatch ]

jobs:
  job:
    runs-on: ${{ matrix.os }}

    strategy:
      fail-fast: false
      matrix:
        os: [ ubuntu-latest, windows-latest, macos-latest ]
        build_type: [ Debug, Release ]

    steps:
    - name: Checkout
      uses: actions/checkout@v3

    - name: Fetch Ninja
      uses: seanmiddleditch/gha-setup-ninja@v3
    
    - name: Run vcpkg
      uses: lukka/run-vcpkg@v11
      with:
        vcpkgArguments: 'doctest'
        vcpkgDirectory: '${{ github.workspace }}/vcpkg'

